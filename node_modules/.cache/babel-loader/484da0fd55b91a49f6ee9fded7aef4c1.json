{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useListener = void 0;\n\nvar _react = require(\"react\");\n\nvar _useThrottle = require(\"./useThrottle\");\n\nvar _usePrevious = require(\"./usePrevious\");\n/**\n * A hook that handles attaching/removing listeners and smartly reattaching if\n * any of the attributes change.\n * @param targetNode The node to attach the listener to.\n * @param callback The function to call from the listener.\n * @param eventType The event name.\n * @param shouldThrottle Whether the callback calls should be throttled.\n * @param shouldListen When the listener should be active.\n */\n\n\nvar useListener = function useListener(targetNode, callback, eventType) {\n  var shouldThrottle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var shouldListen = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var isListening = (0, _react.useRef)(false);\n  var throttle = (0, _useThrottle.useThrottle)(callback);\n  var eventListener = (0, _react.useRef)(shouldThrottle ? throttle : callback);\n  var previousEventType = (0, _usePrevious.usePrevious)(eventType);\n  var previousShouldThrottle = (0, _usePrevious.usePrevious)(shouldThrottle);\n  var previousTargetNode = (0, _usePrevious.usePrevious)(targetNode);\n  var previousCallback = (0, _usePrevious.usePrevious)(callback);\n  (0, _react.useEffect)(function () {\n    // If any of the props related to the attached listener changed then the\n    // listener needs to be re-attached.\n    var listenerAttributesChanged = callback !== previousCallback || eventType !== previousEventType || shouldThrottle !== previousShouldThrottle || targetNode !== previousTargetNode;\n\n    if (isListening.current && (!shouldListen || listenerAttributesChanged)) {\n      previousTargetNode.removeEventListener(previousEventType, eventListener.current);\n      isListening.current = false;\n    }\n\n    if (shouldThrottle !== previousShouldThrottle || callback !== previousCallback) {\n      // Set the listener to the callback, or used the throttled callback.\n      eventListener.current = shouldThrottle ? throttle : callback;\n    }\n\n    if (targetNode && shouldListen && !isListening.current) {\n      targetNode.addEventListener(eventType, eventListener.current);\n      isListening.current = true;\n    }\n  }, [callback, eventType, previousCallback, previousEventType, previousShouldThrottle, previousTargetNode, shouldListen, shouldThrottle, targetNode, throttle]);\n  (0, _react.useEffect)(function () {\n    return function () {\n      // Unattach the listener if the component gets unmounted while\n      // listening.\n      if (targetNode && isListening.current) {\n        targetNode.removeEventListener(eventType, eventListener.current);\n      }\n    };\n  }, [eventType, targetNode]);\n};\n\nexports.useListener = useListener;","map":{"version":3,"names":["Object","defineProperty","exports","value","useListener","_react","require","_useThrottle","_usePrevious","targetNode","callback","eventType","shouldThrottle","arguments","length","undefined","shouldListen","isListening","useRef","throttle","useThrottle","eventListener","previousEventType","usePrevious","previousShouldThrottle","previousTargetNode","previousCallback","useEffect","listenerAttributesChanged","current","removeEventListener","addEventListener"],"sources":["/Users/antondemin/ReactProjects/Canonical_test/canonical_test/node_modules/@canonical/react-components/dist/hooks/useListener.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useListener = void 0;\n\nvar _react = require(\"react\");\n\nvar _useThrottle = require(\"./useThrottle\");\n\nvar _usePrevious = require(\"./usePrevious\");\n\n/**\n * A hook that handles attaching/removing listeners and smartly reattaching if\n * any of the attributes change.\n * @param targetNode The node to attach the listener to.\n * @param callback The function to call from the listener.\n * @param eventType The event name.\n * @param shouldThrottle Whether the callback calls should be throttled.\n * @param shouldListen When the listener should be active.\n */\nvar useListener = function useListener(targetNode, callback, eventType) {\n  var shouldThrottle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var shouldListen = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  var isListening = (0, _react.useRef)(false);\n  var throttle = (0, _useThrottle.useThrottle)(callback);\n  var eventListener = (0, _react.useRef)(shouldThrottle ? throttle : callback);\n  var previousEventType = (0, _usePrevious.usePrevious)(eventType);\n  var previousShouldThrottle = (0, _usePrevious.usePrevious)(shouldThrottle);\n  var previousTargetNode = (0, _usePrevious.usePrevious)(targetNode);\n  var previousCallback = (0, _usePrevious.usePrevious)(callback);\n  (0, _react.useEffect)(function () {\n    // If any of the props related to the attached listener changed then the\n    // listener needs to be re-attached.\n    var listenerAttributesChanged = callback !== previousCallback || eventType !== previousEventType || shouldThrottle !== previousShouldThrottle || targetNode !== previousTargetNode;\n\n    if (isListening.current && (!shouldListen || listenerAttributesChanged)) {\n      previousTargetNode.removeEventListener(previousEventType, eventListener.current);\n      isListening.current = false;\n    }\n\n    if (shouldThrottle !== previousShouldThrottle || callback !== previousCallback) {\n      // Set the listener to the callback, or used the throttled callback.\n      eventListener.current = shouldThrottle ? throttle : callback;\n    }\n\n    if (targetNode && shouldListen && !isListening.current) {\n      targetNode.addEventListener(eventType, eventListener.current);\n      isListening.current = true;\n    }\n  }, [callback, eventType, previousCallback, previousEventType, previousShouldThrottle, previousTargetNode, shouldListen, shouldThrottle, targetNode, throttle]);\n  (0, _react.useEffect)(function () {\n    return function () {\n      // Unattach the listener if the component gets unmounted while\n      // listening.\n      if (targetNode && isListening.current) {\n        targetNode.removeEventListener(eventType, eventListener.current);\n      }\n    };\n  }, [eventType, targetNode]);\n};\n\nexports.useListener = useListener;"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,WAAR,GAAsB,KAAK,CAA3B;;AAEA,IAAIC,MAAM,GAAGC,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIC,YAAY,GAAGD,OAAO,CAAC,eAAD,CAA1B;;AAEA,IAAIE,YAAY,GAAGF,OAAO,CAAC,eAAD,CAA1B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIF,WAAW,GAAG,SAASA,WAAT,CAAqBK,UAArB,EAAiCC,QAAjC,EAA2CC,SAA3C,EAAsD;EACtE,IAAIC,cAAc,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAAzF;EACA,IAAIG,YAAY,GAAGH,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAAvF;EACA,IAAII,WAAW,GAAG,CAAC,GAAGZ,MAAM,CAACa,MAAX,EAAmB,KAAnB,CAAlB;EACA,IAAIC,QAAQ,GAAG,CAAC,GAAGZ,YAAY,CAACa,WAAjB,EAA8BV,QAA9B,CAAf;EACA,IAAIW,aAAa,GAAG,CAAC,GAAGhB,MAAM,CAACa,MAAX,EAAmBN,cAAc,GAAGO,QAAH,GAAcT,QAA/C,CAApB;EACA,IAAIY,iBAAiB,GAAG,CAAC,GAAGd,YAAY,CAACe,WAAjB,EAA8BZ,SAA9B,CAAxB;EACA,IAAIa,sBAAsB,GAAG,CAAC,GAAGhB,YAAY,CAACe,WAAjB,EAA8BX,cAA9B,CAA7B;EACA,IAAIa,kBAAkB,GAAG,CAAC,GAAGjB,YAAY,CAACe,WAAjB,EAA8Bd,UAA9B,CAAzB;EACA,IAAIiB,gBAAgB,GAAG,CAAC,GAAGlB,YAAY,CAACe,WAAjB,EAA8Bb,QAA9B,CAAvB;EACA,CAAC,GAAGL,MAAM,CAACsB,SAAX,EAAsB,YAAY;IAChC;IACA;IACA,IAAIC,yBAAyB,GAAGlB,QAAQ,KAAKgB,gBAAb,IAAiCf,SAAS,KAAKW,iBAA/C,IAAoEV,cAAc,KAAKY,sBAAvF,IAAiHf,UAAU,KAAKgB,kBAAhK;;IAEA,IAAIR,WAAW,CAACY,OAAZ,KAAwB,CAACb,YAAD,IAAiBY,yBAAzC,CAAJ,EAAyE;MACvEH,kBAAkB,CAACK,mBAAnB,CAAuCR,iBAAvC,EAA0DD,aAAa,CAACQ,OAAxE;MACAZ,WAAW,CAACY,OAAZ,GAAsB,KAAtB;IACD;;IAED,IAAIjB,cAAc,KAAKY,sBAAnB,IAA6Cd,QAAQ,KAAKgB,gBAA9D,EAAgF;MAC9E;MACAL,aAAa,CAACQ,OAAd,GAAwBjB,cAAc,GAAGO,QAAH,GAAcT,QAApD;IACD;;IAED,IAAID,UAAU,IAAIO,YAAd,IAA8B,CAACC,WAAW,CAACY,OAA/C,EAAwD;MACtDpB,UAAU,CAACsB,gBAAX,CAA4BpB,SAA5B,EAAuCU,aAAa,CAACQ,OAArD;MACAZ,WAAW,CAACY,OAAZ,GAAsB,IAAtB;IACD;EACF,CAnBD,EAmBG,CAACnB,QAAD,EAAWC,SAAX,EAAsBe,gBAAtB,EAAwCJ,iBAAxC,EAA2DE,sBAA3D,EAAmFC,kBAAnF,EAAuGT,YAAvG,EAAqHJ,cAArH,EAAqIH,UAArI,EAAiJU,QAAjJ,CAnBH;EAoBA,CAAC,GAAGd,MAAM,CAACsB,SAAX,EAAsB,YAAY;IAChC,OAAO,YAAY;MACjB;MACA;MACA,IAAIlB,UAAU,IAAIQ,WAAW,CAACY,OAA9B,EAAuC;QACrCpB,UAAU,CAACqB,mBAAX,CAA+BnB,SAA/B,EAA0CU,aAAa,CAACQ,OAAxD;MACD;IACF,CAND;EAOD,CARD,EAQG,CAAClB,SAAD,EAAYF,UAAZ,CARH;AASD,CAvCD;;AAyCAP,OAAO,CAACE,WAAR,GAAsBA,WAAtB"},"metadata":{},"sourceType":"script"}