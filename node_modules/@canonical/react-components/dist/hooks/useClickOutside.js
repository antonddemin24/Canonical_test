"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useClickOutside = void 0;

var _react = require("react");

var _useId = require("./useId");

/**
 * Handle clicks outside an element.
 * @returns An id and ref to pass to the element to handle clicks
 * outside of.
 */
var useClickOutside = function useClickOutside(onClickOutside) {
  var wrapperRef = (0, _react.useRef)(null);
  var id = (0, _useId.useId)();
  var handleClickOutside = (0, _react.useCallback)(function (evt) {
    var _evt$target, _wrapperRef$current;

    var target = evt.target; // The target might be something like an SVG node which doesn't provide
    // the class name as a string.

    var isValidTarget = typeof (evt === null || evt === void 0 ? void 0 : (_evt$target = evt.target) === null || _evt$target === void 0 ? void 0 : _evt$target.className) === "string";

    if (!isValidTarget || wrapperRef.current && !((_wrapperRef$current = wrapperRef.current) !== null && _wrapperRef$current !== void 0 && _wrapperRef$current.contains(target)) && target.id !== id) {
      onClickOutside();
    }
  }, [id, onClickOutside]);
  (0, _react.useEffect)(function () {
    document.addEventListener("click", handleClickOutside, false);
    return function () {
      return document.removeEventListener("click", handleClickOutside, false);
    };
  }, [handleClickOutside]);
  return [wrapperRef, id];
};

exports.useClickOutside = useClickOutside;